DROP TABLE IF EXISTS NOTES;
DROP TABLE IF EXISTS NOTE_FREQUENCIES;
DROP TABLE IF EXISTS SCALES;
DROP TABLE IF EXISTS SCALE_NOTE_MAP;
DROP TABLE IF EXISTS TUNINGS;

CREATE TABLE IF NOT EXISTS
NOTES
(
    ID      INTEGER CONSTRAINT primkey PRIMARY KEY ASC AUTOINCREMENT,
    Name    TEXT
);

CREATE TABLE IF NOT EXISTS
NOTE_FREQUENCIES
(
    ID      INTEGER CONSTRAINT primkey PRIMARY KEY ASC AUTOINCREMENT,
    NoteID  INTEGER,
    Octave  INTEGER,
    Freq    REAL,
    FOREIGN KEY(NoteID) REFERENCES NOTES(ID)
);

CREATE TABLE IF NOT EXISTS
SCALES
(
    ID      INTEGER CONSTRAINT primkey PRIMARY KEY ASC AUTOINCREMENT,
    Name    TEXT
);

CREATE TABLE IF NOT EXISTS
SCALE_NOTE_MAP
(
    ID      INTEGER CONSTRAINT primkey PRIMARY KEY ASC AUTOINCREMENT,
    ScaleID INTEGER,
    NoteID INTEGER,
    FOREIGN KEY(ScaleID) REFERENCES SCALES(ID),
    FOREIGN KEY(NoteID) REFERENCES NOTES(ID)
);

CREATE TABLE IF NOT EXISTS
TUNINGS
(
    Oscillator  INTEGER,
    Frequency   REAL,
    Resistance  INTEGER,
    CONSTRAINT primkey PRIMARY KEY (Frequency, Oscillator),
	FOREIGN KEY(Frequency) REFERENCES NOTE_FREQUENCIES(Freq)
) WITHOUT ROWID;